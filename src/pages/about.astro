---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { name, openGraph } from 'spectre:globals';

// Get the about entry from the 'other' collection
const otherEntries = await getCollection('other');
const aboutEntry = otherEntries.find(entry => entry.id === 'about');

// Render the content if the entry exists
let Content;
if (aboutEntry) {
  // Use the correct approach to get the content
  // TypeScript may show an error, but this should work at runtime
  const rendered = await aboutEntry.render();
  Content = rendered.Content;
}
---

<Layout 
  title={`About | ${name}`}
  description={openGraph.home.description || 'About Paradise Labs'}
>
  {aboutEntry ? (
    <div class="container">
      <h1>{aboutEntry.data.title}</h1>
      <div class="prose">
        <Content />
      </div>
    </div>
  ) : (
    <div class="container">
      <h1>About Page Not Found</h1>
      <p>The content for the about page could not be loaded. Please check the logs.</p>
      <p>Attempted to load: 'other' collection, 'about' slug.</p>
    </div>
  )}
</Layout>

<style>
  .container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
  }
  .prose {
    line-height: 1.6;
  }
</style>
